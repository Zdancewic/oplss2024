<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="common/css/sf.css" rel="stylesheet" type="text/css" />
<title>Utils</title>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/rip.css" rel="stylesheet" type="text/css"/>
</head>

<body>

<div id="page">

<div id="header">
<div id='logoinheader'><a href='https://softwarefoundations.cis.upenn.edu'>
<img src='common/media/image/sf_logo_sm.png' alt='Software Foundations Logo'></a></div>
<div class='booktitleinheader'><a href='index.html'>Volume 7: Reasoning about Interactive Programs</a></div>
<ul id='menu'>
   <li class='section_name'><a href='toc.html'>Table of Contents</a></li>
   <li class='section_name'><a href='coqindex.html'>Index</a></li>
</ul>
</div>

<div id="main">

<h1 class="libtitle">Utils</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#"><span class="id" title="library">String</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.RelationClasses.html#"><span class="id" title="library">RelationClasses</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">ITree</span> <span class="id" title="library">ITreeFacts</span> <span class="id" title="library">Events.State</span> <span class="id" title="library">Events.StateFacts</span> <span class="id" title="library">HeterogeneousRelations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">ITreeNotations</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Variant</span> <a id="void" class="idref" href="#void"><span class="id" title="inductive">void</span></a> : <span class="id" title="keyword">Type</span> :=.<br/>
<span class="id" title="keyword">Variant</span> <a id="voidE" class="idref" href="#voidE"><span class="id" title="inductive">voidE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Notation</span> <a id=":::'pred'_x" class="idref" href="#:::'pred'_x"><span class="id" title="notation">&quot;</span></a>'pred' A" := (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)     (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'rel'_x" class="idref" href="#:::'rel'_x"><span class="id" title="notation">&quot;</span></a>'rel' A"  := (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'relH'_x_x" class="idref" href="#:::'relH'_x_x"><span class="id" title="notation">&quot;</span></a>'relH' A B"  := (<span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10).<br/>
</div>

<div class="doc">
Utilities to reason equationally 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">cut</span> := <span class="id" title="tactic">apply</span> <span class="id" title="lemma">eutt_eq_bind</span>; <span class="id" title="tactic">intros</span> ?.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ecut</span> := <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eutt_clo_bind</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "cut" "with" <span class="id" title="var">uconstr</span>(<span class="id" title="var">x</span>) := <span class="id" title="tactic">apply</span> <span class="id" title="lemma">eutt_clo_bind</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">UU</span> := <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">break</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> &#x22A2; <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> &#x22A2; <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac<sub>4</sub>"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span> &#x22A2; <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span> &#x22A2; <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ret</span> := <span class="id" title="tactic">apply</span> <span class="id" title="lemma">eutt_Ret</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">break_match</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> &#x22A2; <span class="id" title="keyword">context</span>[<span class="id" title="keyword">match</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:?<span class="id" title="var">EQ</span> <span class="id" title="keyword">end</span>.<br/><hr class='doublespaceincode'/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<span class="id" title="lemma">interp_state_bind</span> @<span class="id" title="lemma">interp_state_trigger</span> @<span class="id" title="lemma">interp_state_ret</span> @<span class="id" title="lemma">bind_ret_l</span> @<span class="id" title="lemma">bind_bind</span> : <span class="id" title="var">opt</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">norm</span> := <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">opt</span>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;Imperative&nbsp;loops&nbsp;are&nbsp;particular&nbsp;pattens&nbsp;of&nbsp;recursion:&nbsp;they&nbsp;do&nbsp;not&nbsp;carry&nbsp;any&nbsp;notion&nbsp;of&nbsp;accumulator.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;can&nbsp;capture&nbsp;this&nbsp;pattern&nbsp;with&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="tactic">repeat</span></span>&nbsp;combinator.<br/>
*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="repeat" class="idref" href="#repeat"><span class="id" title="definition">repeat</span></a> {<a id="E:5" class="idref" href="#E:5"><span class="id" title="binder">E</span></a>} (<a id="step:6" class="idref" href="#step:6"><span class="id" title="binder">step</span></a> : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:5"><span class="id" title="variable">E</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)) : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:5"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">ITree.iter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Utils.html#step:6"><span class="id" title="variable">step</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
</div>

<div class="doc">
Necessary generic material about <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> 
</div>
<div class="code">
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="eutt_repeat" class="idref" href="#eutt_repeat"><span class="id" title="instance">eutt_repeat</span></a> {<a id="E:7" class="idref" href="#E:7"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">eutt</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">eutt</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="Utils.html#E:7"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">eutt_iter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ?.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a id="unfold_repeat" class="idref" href="#unfold_repeat"><span class="id" title="lemma">unfold_repeat</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="E:8" class="idref" href="#E:8"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} (<a id="step:9" class="idref" href="#step:9"><span class="id" title="binder">step</span></a> : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:8"><span class="id" title="variable">E</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="Utils.html#step:9"><span class="id" title="variable">step</span></a> <span class="id" title="notation">≅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="flag:10" class="idref" href="#flag:10"><span class="id" title="binder">flag</span></a> <span class="id" title="notation">&lt;-</span> <a class="idref" href="Utils.html#step:9"><span class="id" title="variable">step</span></a><span class="id" title="notation">;;</span> <span class="id" title="keyword">match</span> <a class="idref" href="Utils.html#flag:10"><span class="id" title="variable">flag</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="abbreviation">Tau</span> (<a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="Utils.html#step:9"><span class="id" title="variable">step</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="abbreviation">Ret</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">unfold_iter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eq_itree_clo_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">break</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;TODO:&nbsp;define&nbsp;a&nbsp;generic&nbsp;<span class="inlinecode"><span class="id" title="tactic">repeat</span></span>&nbsp;for&nbsp;iterative&nbsp;monads&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="repeat_state" class="idref" href="#repeat_state"><span class="id" title="definition">repeat_state</span></a> {<a id="E:12" class="idref" href="#E:12"><span class="id" title="binder">E</span></a> <a id="S:13" class="idref" href="#S:13"><span class="id" title="binder">S</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="definition">Monads.stateT</span> <a class="idref" href="Utils.html#S:13"><span class="id" title="variable">S</span></a> (<span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:12"><span class="id" title="variable">E</span></a>) (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">Monads.stateT</span> <a class="idref" href="Utils.html#S:13"><span class="id" title="variable">S</span></a> (<span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:12"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="step:14" class="idref" href="#step:14"><span class="id" title="binder">step</span></a> ⇒ <span class="id" title="definition">Basics.iter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Utils.html#step:14"><span class="id" title="variable">step</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a id="unfold_repeat_state" class="idref" href="#unfold_repeat_state"><span class="id" title="lemma">unfold_repeat_state</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="E:15" class="idref" href="#E:15"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="S:16" class="idref" href="#S:16"><span class="id" title="binder">S</span></a>} (<a id="step:17" class="idref" href="#step:17"><span class="id" title="binder">step</span></a> : <span class="id" title="definition">Monads.stateT</span> <a class="idref" href="Utils.html#S:16"><span class="id" title="variable">S</span></a> (<span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:15"><span class="id" title="variable">E</span></a>) (<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)) <a id="afb2f45ff79aed8fbb6b6cf08ccf3841" class="idref" href="#afb2f45ff79aed8fbb6b6cf08ccf3841"><span class="id" title="binder">σ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#step:17"><span class="id" title="variable">step</span></a> <a class="idref" href="Utils.html#afb2f45ff79aed8fbb6b6cf08ccf3841"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">≅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="flag:19" class="idref" href="#flag:19"><span class="id" title="binder">flag</span></a> <span class="id" title="notation">&lt;-</span> <a class="idref" href="Utils.html#step:17"><span class="id" title="variable">step</span></a> <a class="idref" href="Utils.html#afb2f45ff79aed8fbb6b6cf08ccf3841"><span class="id" title="variable">σ</span></a><span class="id" title="notation">;;</span> <span class="id" title="keyword">match</span> <a class="idref" href="Utils.html#flag:19"><span class="id" title="variable">flag</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>σ<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="abbreviation">Tau</span> (<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#step:17"><span class="id" title="variable">step</span></a> <a class="idref" href="Utils.html#afb2f45ff79aed8fbb6b6cf08ccf3841"><span class="id" title="variable">σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>σ<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="abbreviation">Ret</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#afb2f45ff79aed8fbb6b6cf08ccf3841"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a>, <span class="id" title="definition">Basics.iter</span>, <span class="id" title="instance">MonadIter_stateT0</span>, <span class="id" title="definition">Basics.iter</span>, <span class="id" title="instance">MonadIter_itree</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">unfold_iter</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">bind_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eq_itree_clo_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bind_ret_l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">break</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="eq_itree_repeat_state" class="idref" href="#eq_itree_repeat_state"><span class="id" title="instance">eq_itree_repeat_state</span></a> {<a id="E:21" class="idref" href="#E:21"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="S:22" class="idref" href="#S:22"><span class="id" title="binder">S</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">eq_itree</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">eq_itree</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)) (@<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#E:21"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#S:22"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">EQ</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">eq_itree_iter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? []] [? []] <span class="id" title="var">eq</span>; <span class="id" title="var">inv</span> <span class="id" title="var">eq</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eq_itree_clo_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> [? ?] ? &lt;-; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="eutt_repeat_state" class="idref" href="#eutt_repeat_state"><span class="id" title="instance">eutt_repeat_state</span></a> {<a id="E:23" class="idref" href="#E:23"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="S:24" class="idref" href="#S:24"><span class="id" title="binder">S</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">eutt</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">eutt</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)) (@<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#E:23"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#S:24"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">EQ</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">eutt_iter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? []]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eutt_clo_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">break</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Definition</span> <a id="eutt_repeat_state_gen" class="idref" href="#eutt_repeat_state_gen"><span class="id" title="definition">eutt_repeat_state_gen</span></a> {<a id="E:25" class="idref" href="#E:25"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="S:26" class="idref" href="#S:26"><span class="id" title="binder">S</span></a>: <span class="id" title="keyword">Type</span>} (<a id="RS:27" class="idref" href="#RS:27"><span class="id" title="binder">RS</span></a> : <a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">rel</span></a> <a class="idref" href="Utils.html#S:26"><span class="id" title="variable">S</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#RS:27"><span class="id" title="variable">RS</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="definition">eutt</span> (<span class="id" title="record">prod_rel</span> <a class="idref" href="Utils.html#RS:27"><span class="id" title="variable">RS</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#RS:27"><span class="id" title="variable">RS</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="definition">eutt</span> (<span class="id" title="record">prod_rel</span> <a class="idref" href="Utils.html#RS:27"><span class="id" title="variable">RS</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">))</span></a>) (@<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#E:25"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#S:26"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<span class="id" title="definition">eutt_iter_gen</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="record">prod_rel</span> <span class="id" title="var">RS</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)).<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] [] []; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">ecut</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] [] []; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ret</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s<sub>4</sub></span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Variant</span> <a id="prod_sum_rel" class="idref" href="#prod_sum_rel"><span class="id" title="inductive">prod_sum_rel</span></a> {<a id="S:28" class="idref" href="#S:28"><span class="id" title="binder">S</span></a>} (<a id="R<sub>1</sub>:29" class="idref" href="#R<sub>1</sub>:29"><span class="id" title="binder">R<sub>1</sub></span></a> <a id="R<sub>2</sub>:30" class="idref" href="#R<sub>2</sub>:30"><span class="id" title="binder">R<sub>2</sub></span></a> : <a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">rel</span></a> <a class="idref" href="Utils.html#S:28"><span class="id" title="variable">S</span></a>) : <a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">rel</span></a> <a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">S</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac<sub>4</sub>"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac<sub>4</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d<sub>92</sub>"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac<sub>4</sub>"><span class="id" title="notation">)</span></a><a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">)</span></a> :=<br/>
| <a id="prod_sum_rel_left" class="idref" href="#prod_sum_rel_left"><span class="id" title="constructor">prod_sum_rel_left</span></a>  <a id="4c6c5f9d294d87c4d7c3175f2cf027c<sub>5</sub>" class="idref" href="#4c6c5f9d294d87c4d7c3175f2cf027c<sub>5</sub>"><span class="id" title="binder">σ</span></a> <a id="48bc364741f44956e592f3cfb9b62cb<sub>5</sub>" class="idref" href="#48bc364741f44956e592f3cfb9b62cb<sub>5</sub>"><span class="id" title="binder">σ'</span></a> : <a class="idref" href="Utils.html#R<sub>1</sub>:29"><span class="id" title="variable">R<sub>1</sub></span></a> <a class="idref" href="Utils.html#4c6c5f9d294d87c4d7c3175f2cf027c<sub>5</sub>"><span class="id" title="variable">σ</span></a> <a class="idref" href="Utils.html#48bc364741f44956e592f3cfb9b62cb<sub>5</sub>"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#prod_sum_rel:31"><span class="id" title="inductive">prod_sum_rel</span></a> <a class="idref" href="Utils.html#R<sub>1</sub>:29"><span class="id" title="variable">R<sub>1</sub></span></a> <a class="idref" href="Utils.html#R<sub>2</sub>:30"><span class="id" title="variable">R<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#4c6c5f9d294d87c4d7c3175f2cf027c<sub>5</sub>"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#48bc364741f44956e592f3cfb9b62cb<sub>5</sub>"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
| <a id="prod_sum_rel_right" class="idref" href="#prod_sum_rel_right"><span class="id" title="constructor">prod_sum_rel_right</span></a> <a id="8b3949d2de8620e054410c326ed1c9c<sub>8</sub>" class="idref" href="#8b3949d2de8620e054410c326ed1c9c<sub>8</sub>"><span class="id" title="binder">σ</span></a> <a id="104ac075b73b6784994e1dc7c5018e5d" class="idref" href="#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="binder">σ'</span></a> : <a class="idref" href="Utils.html#R<sub>2</sub>:30"><span class="id" title="variable">R<sub>2</sub></span></a> <a class="idref" href="Utils.html#8b3949d2de8620e054410c326ed1c9c<sub>8</sub>"><span class="id" title="variable">σ</span></a> <a class="idref" href="Utils.html#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#prod_sum_rel:31"><span class="id" title="inductive">prod_sum_rel</span></a> <a class="idref" href="Utils.html#R<sub>1</sub>:29"><span class="id" title="variable">R<sub>1</sub></span></a> <a class="idref" href="Utils.html#R<sub>2</sub>:30"><span class="id" title="variable">R<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#8b3949d2de8620e054410c326ed1c9c<sub>8</sub>"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a id="eutt_repeat_state'" class="idref" href="#eutt_repeat_state'"><span class="id" title="lemma">eutt_repeat_state'</span></a> {<a id="E:37" class="idref" href="#E:37"><span class="id" title="binder">E</span></a> <a id="S:38" class="idref" href="#S:38"><span class="id" title="binder">S</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="RI:39" class="idref" href="#RI:39"><span class="id" title="binder">RI</span></a> : <a class="idref" href="Utils.html#S:38"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#S:38"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="RR:40" class="idref" href="#RR:40"><span class="id" title="binder">RR</span></a> : <a class="idref" href="Utils.html#S:38"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#S:38"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="body1:41" class="idref" href="#body1:41"><span class="id" title="binder">body1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="body2:42" class="idref" href="#body2:42"><span class="id" title="binder">body2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="eutt_body:45" class="idref" href="#eutt_body:45"><span class="id" title="binder">eutt_body</span></a> : <span class="id" title="keyword">∀</span> <a id="s<sub>1</sub>:43" class="idref" href="#s<sub>1</sub>:43"><span class="id" title="binder">s<sub>1</sub></span></a> <a id="s<sub>2</sub>:44" class="idref" href="#s<sub>2</sub>:44"><span class="id" title="binder">s<sub>2</sub></span></a>, <a class="idref" href="Utils.html#RI:39"><span class="id" title="variable">RI</span></a> <a class="idref" href="Utils.html#s<sub>1</sub>:43"><span class="id" title="variable">s<sub>1</sub></span></a> <a class="idref" href="Utils.html#s<sub>2</sub>:44"><span class="id" title="variable">s<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="definition">eutt</span> (<a class="idref" href="Utils.html#prod_sum_rel"><span class="id" title="inductive">prod_sum_rel</span></a> <a class="idref" href="Utils.html#RI:39"><span class="id" title="variable">RI</span></a> <a class="idref" href="Utils.html#RR:40"><span class="id" title="variable">RR</span></a>) (<a class="idref" href="Utils.html#body1:41"><span class="id" title="variable">body1</span></a> <a class="idref" href="Utils.html#s<sub>1</sub>:43"><span class="id" title="variable">s<sub>1</sub></span></a>) (<a class="idref" href="Utils.html#body2:42"><span class="id" title="variable">body2</span></a> <a class="idref" href="Utils.html#s<sub>2</sub>:44"><span class="id" title="variable">s<sub>2</sub></span></a>))<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="s<sub>1</sub>:46" class="idref" href="#s<sub>1</sub>:46"><span class="id" title="binder">s<sub>1</sub></span></a> <a id="s<sub>2</sub>:47" class="idref" href="#s<sub>2</sub>:47"><span class="id" title="binder">s<sub>2</sub></span></a> (<a id="RI_i:48" class="idref" href="#RI_i:48"><span class="id" title="binder">RI_i</span></a> : <a class="idref" href="Utils.html#RI:39"><span class="id" title="variable">RI</span></a> <a class="idref" href="Utils.html#s<sub>1</sub>:46"><span class="id" title="variable">s<sub>1</sub></span></a> <a class="idref" href="Utils.html#s<sub>2</sub>:47"><span class="id" title="variable">s<sub>2</sub></span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">eutt</span> (<span class="id" title="record">prod_rel</span> <a class="idref" href="Utils.html#RR:40"><span class="id" title="variable">RR</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#E:37"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#S:38"><span class="id" title="variable">S</span></a> <a class="idref" href="Utils.html#body1:41"><span class="id" title="variable">body1</span></a> <a class="idref" href="Utils.html#s<sub>1</sub>:46"><span class="id" title="variable">s<sub>1</sub></span></a>) (<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#body2:42"><span class="id" title="variable">body2</span></a> <a class="idref" href="Utils.html#s<sub>2</sub>:47"><span class="id" title="variable">s<sub>2</sub></span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">einit</span>. <span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">eutt_body</span> <span class="id" title="var">s<sub>1</sub></span> <span class="id" title="var">s<sub>2</sub></span> <span class="id" title="var">RI_i</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Utils.html#unfold_repeat_state"><span class="id" title="lemma">unfold_repeat_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ebind</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] [] ?.<br/>
&nbsp;&nbsp;<span class="id" title="var">inv</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">etau</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paco</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;Annoyingly&nbsp;enough,&nbsp;we&nbsp;cannot&nbsp;leverage&nbsp;<span class="inlinecode"><span class="id" title="var">eutt_iter_gen</span></span>&nbsp;to&nbsp;derive&nbsp;this&nbsp;schema:&nbsp;we&nbsp;return&nbsp;a&nbsp;prod&nbsp;of&nbsp;a&nbsp;sum,&nbsp;and&nbsp;not&nbsp;a&nbsp;sum&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="eutt_repeat_state_gen'" class="idref" href="#eutt_repeat_state_gen'"><span class="id" title="definition">eutt_repeat_state_gen'</span></a> {<a id="E:49" class="idref" href="#E:49"><span class="id" title="binder">E</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="S:50" class="idref" href="#S:50"><span class="id" title="binder">S</span></a>: <span class="id" title="keyword">Type</span>} (<a id="RI:51" class="idref" href="#RI:51"><span class="id" title="binder">RI</span></a> <a id="RS:52" class="idref" href="#RS:52"><span class="id" title="binder">RS</span></a> : <a class="idref" href="Utils.html#:::'rel'_x"><span class="id" title="notation">rel</span></a> <a class="idref" href="Utils.html#S:50"><span class="id" title="variable">S</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#RI:51"><span class="id" title="variable">RI</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="definition">eutt</span> (<a class="idref" href="Utils.html#prod_sum_rel"><span class="id" title="inductive">prod_sum_rel</span></a> <a class="idref" href="Utils.html#RI:51"><span class="id" title="variable">RI</span></a> <a class="idref" href="Utils.html#RS:52"><span class="id" title="variable">RS</span></a>)<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="Utils.html#RI:51"><span class="id" title="variable">RI</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="definition">eutt</span> (<span class="id" title="record">prod_rel</span> <a class="idref" href="Utils.html#RS:52"><span class="id" title="variable">RS</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>)<a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">))</span></a>) (@<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> <a class="idref" href="Utils.html#E:49"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#S:50"><span class="id" title="variable">S</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#eutt_repeat_state'"><span class="id" title="lemma">eutt_repeat_state'</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a id="interp_state_repeat" class="idref" href="#interp_state_repeat"><span class="id" title="lemma">interp_state_repeat</span></a> {<a id="E:53" class="idref" href="#E:53"><span class="id" title="binder">E</span></a> <a id="F:54" class="idref" href="#F:54"><span class="id" title="binder">F</span></a> <a id="S:55" class="idref" href="#S:55"><span class="id" title="binder">S</span></a>} (<a id="t:56" class="idref" href="#t:56"><span class="id" title="binder">t</span></a> : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:53"><span class="id" title="variable">E</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;(<a id="h:58" class="idref" href="#h:58"><span class="id" title="binder">h</span></a> : <span class="id" title="keyword">∀</span> <a id="T:57" class="idref" href="#T:57"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>, <a class="idref" href="Utils.html#E:53"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#T:57"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="definition">Monads.stateT</span> <a class="idref" href="Utils.html#S:55"><span class="id" title="variable">S</span></a> (<span class="id" title="record">itree</span> <a class="idref" href="Utils.html#F:54"><span class="id" title="variable">F</span></a>) <a class="idref" href="Utils.html#T:57"><span class="id" title="variable">T</span></a>) <a id="5a9b0098afca755e8cd9d7504a2c357d" class="idref" href="#5a9b0098afca755e8cd9d7504a2c357d"><span class="id" title="binder">σ</span></a><br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<span class="id" title="definition">interp_state</span> <a class="idref" href="Utils.html#h:58"><span class="id" title="variable">h</span></a> (<a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="Utils.html#t:56"><span class="id" title="variable">t</span></a>) <a class="idref" href="Utils.html#5a9b0098afca755e8cd9d7504a2c357d"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">≅</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#repeat_state"><span class="id" title="definition">repeat_state</span></a> (<span class="id" title="definition">interp_state</span> <a class="idref" href="Utils.html#h:58"><span class="id" title="variable">h</span></a> <a class="idref" href="Utils.html#t:56"><span class="id" title="variable">t</span></a>) <a class="idref" href="Utils.html#5a9b0098afca755e8cd9d7504a2c357d"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Utils.html#repeat"><span class="id" title="definition">repeat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">interp_state_iter'</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> ⇒ <span class="id" title="var">t</span>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> σ).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;Ok&nbsp;the&nbsp;next&nbsp;section&nbsp;is&nbsp;a&nbsp;completely&nbsp;irrelevant&nbsp;tangent,<br/>
&nbsp;&nbsp;&nbsp;but&nbsp;expressing&nbsp;the&nbsp;purity&nbsp;of&nbsp;expressions&nbsp;made&nbsp;me&nbsp;wonder:<br/>
&nbsp;&nbsp;&nbsp;if&nbsp;I&nbsp;work&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">void1</span></span>,&nbsp;I&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;prove&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">;;</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">≈</span> <span class="inlinecode"><span class="id" title="var">t</span></span>&nbsp;without&nbsp;knowing&nbsp;whether&nbsp;<span class="inlinecode"><span class="id" title="var">t</span></span>&nbsp;diverges&nbsp;or&nbsp;not.<br/>
&nbsp;&nbsp;&nbsp;But&nbsp;how&nbsp;do&nbsp;I&nbsp;prove&nbsp;it?&nbsp;Here's&nbsp;the&nbsp;simplest&nbsp;I&nbsp;found.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ITree</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Props.HasPost</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">HasPostNotations</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Section</span> <a id="Tangent" class="idref" href="#Tangent"><span class="id" title="section">Tangent</span></a>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="subtree" class="idref" href="#subtree"><span class="id" title="definition, inductive"><span id="subtree_ind" class="id"><span id="subtree_sind" class="id">subtree</span></span></span></a> {<a id="E:60" class="idref" href="#E:60"><span class="id" title="binder">E</span></a> <a id="X:61" class="idref" href="#X:61"><span class="id" title="binder">X</span></a>} (<a id="t:62" class="idref" href="#t:62"><span class="id" title="binder">t</span></a> : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#X:61"><span class="id" title="variable">X</span></a>) : <span class="id" title="record">itree</span> <span class="id" title="var">E</span> <span class="id" title="var">X</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="sub_refl" class="idref" href="#sub_refl"><span class="id" title="constructor">sub_refl</span></a>  <a id="v:65" class="idref" href="#v:65"><span class="id" title="binder">v</span></a> : <a class="idref" href="Utils.html#v:65"><span class="id" title="variable">v</span></a> <span class="id" title="notation">≅</span> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#subtree:63"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#v:65"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;| <a id="sub_tau" class="idref" href="#sub_tau"><span class="id" title="constructor">sub_tau</span></a> <a id="u:66" class="idref" href="#u:66"><span class="id" title="binder">u</span></a> <a id="v:67" class="idref" href="#v:67"><span class="id" title="binder">v</span></a> : <a class="idref" href="Utils.html#v:67"><span class="id" title="variable">v</span></a> <span class="id" title="notation">≅</span> <span class="id" title="abbreviation">Tau</span> <a class="idref" href="Utils.html#u:66"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#subtree:63"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#u:66"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#subtree:63"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#v:67"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;| <a id="sub_vis" class="idref" href="#sub_vis"><span class="id" title="constructor">sub_vis</span></a> <a id="Y:68" class="idref" href="#Y:68"><span class="id" title="binder">Y</span></a> (<a id="e:69" class="idref" href="#e:69"><span class="id" title="binder">e</span></a> : <a class="idref" href="Utils.html#E:60"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#Y:68"><span class="id" title="variable">Y</span></a>) <a id="y:70" class="idref" href="#y:70"><span class="id" title="binder">y</span></a> <a id="k:71" class="idref" href="#k:71"><span class="id" title="binder">k</span></a> <a id="v:72" class="idref" href="#v:72"><span class="id" title="binder">v</span></a> : <a class="idref" href="Utils.html#v:72"><span class="id" title="variable">v</span></a> <span class="id" title="notation">≅</span> <span class="id" title="abbreviation">Vis</span> <a class="idref" href="Utils.html#e:69"><span class="id" title="variable">e</span></a> <a class="idref" href="Utils.html#k:71"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#subtree:63"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> (<a class="idref" href="Utils.html#k:71"><span class="id" title="variable">k</span></a> <a class="idref" href="Utils.html#y:70"><span class="id" title="variable">y</span></a>) <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Utils.html#subtree:63"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#t:62"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#v:72"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="ce310e65ccd25f20819d58a47b7cd85e" class="idref" href="#ce310e65ccd25f20819d58a47b7cd85e"><span class="id" title="notation">&quot;</span></a>⊑" := <a class="idref" href="Utils.html#subtree"><span class="id" title="inductive">subtree</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="eq_itree_subtree" class="idref" href="#eq_itree_subtree"><span class="id" title="instance">eq_itree_subtree</span></a> {<a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a> <a id="X:74" class="idref" href="#X:74"><span class="id" title="binder">X</span></a>} : <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">eq_itree</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">eq_itree</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (@<a class="idref" href="Utils.html#subtree"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#E:73"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#X:74"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">eqt</span> <span class="id" title="var">u</span> <span class="id" title="var">u'</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">u'</span> <span class="id" title="var">equ</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">sub</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#sub_refl"><span class="id" title="constructor">sub_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>, <span class="id" title="var">eqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_tau"><span class="id" title="constructor">sub_tau</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_vis"><span class="id" title="constructor">sub_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">u</span> <span class="id" title="var">equ</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">sub</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#sub_refl"><span class="id" title="constructor">sub_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>, <span class="id" title="var">eqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_tau"><span class="id" title="constructor">sub_tau</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_vis"><span class="id" title="constructor">sub_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>, <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="equiv_subtree" class="idref" href="#equiv_subtree"><span class="id" title="instance">equiv_subtree</span></a> {<a id="E:75" class="idref" href="#E:75"><span class="id" title="binder">E</span></a> <a id="X:76" class="idref" href="#X:76"><span class="id" title="binder">X</span></a>} : <a class="idref" href="http://coq.inria.fr/library//Coq.Classes.RelationClasses.html#PreOrder"><span class="id" title="class">PreOrder</span></a> (@<a class="idref" href="Utils.html#subtree"><span class="id" title="inductive">subtree</span></a> <a class="idref" href="Utils.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#X:76"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#sub_refl"><span class="id" title="constructor">sub_refl</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">sub1</span> <span class="id" title="var">sub2</span>; <span class="id" title="var">revert</span> <span class="id" title="var">t</span> <span class="id" title="var">sub1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">sub2</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">sub1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_tau"><span class="id" title="constructor">sub_tau</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_vis"><span class="id" title="constructor">sub_vis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsub2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tau_subtree" class="idref" href="#tau_subtree"><span class="id" title="lemma">tau_subtree</span></a> {<a id="E:77" class="idref" href="#E:77"><span class="id" title="binder">E</span></a> <a id="X:78" class="idref" href="#X:78"><span class="id" title="binder">X</span></a>} : <span class="id" title="keyword">∀</span> (<a id="t:79" class="idref" href="#t:79"><span class="id" title="binder">t</span></a> <a id="u:80" class="idref" href="#u:80"><span class="id" title="binder">u</span></a> : <span class="id" title="record">itree</span> <a class="idref" href="Utils.html#E:77"><span class="id" title="variable">E</span></a> <a class="idref" href="Utils.html#X:78"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">Tau</span> <a class="idref" href="Utils.html#t:79"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#ce310e65ccd25f20819d58a47b7cd85e"><span class="id" title="notation">⊑</span></a> <a class="idref" href="Utils.html#u:80"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#t:79"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#ce310e65ccd25f20819d58a47b7cd85e"><span class="id" title="notation">⊑</span></a> <a class="idref" href="Utils.html#u:80"><span class="id" title="variable">u</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_tau"><span class="id" title="constructor">sub_tau</span></a>; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#sub_refl"><span class="id" title="constructor">sub_refl</span></a>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_tau"><span class="id" title="constructor">sub_tau</span></a>; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="var">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Utils.html#sub_vis"><span class="id" title="constructor">sub_vis</span></a>; [<span class="id" title="tactic">reflexivity</span> | <span class="id" title="var">eassumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pure_div_or_ret_aux" class="idref" href="#pure_div_or_ret_aux"><span class="id" title="lemma">pure_div_or_ret_aux</span></a> : <span class="id" title="keyword">∀</span> {<a id="X:81" class="idref" href="#X:81"><span class="id" title="binder">X</span></a>} (<a id="t:82" class="idref" href="#t:82"><span class="id" title="binder">t</span></a> <a id="u:83" class="idref" href="#u:83"><span class="id" title="binder">u</span></a> : <span class="id" title="record">itree</span> <span class="id" title="inductive">void1</span> <a class="idref" href="Utils.html#X:81"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#t:82"><span class="id" title="variable">t</span></a> <a class="idref" href="Utils.html#ce310e65ccd25f20819d58a47b7cd85e"><span class="id" title="notation">⊑</span></a> <a class="idref" href="Utils.html#u:83"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#t:82"><span class="id" title="variable">t</span></a> <span class="id" title="notation">⤳</span> <span class="id" title="keyword">fun</span> <a id="x:84" class="idref" href="#x:84"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="Utils.html#u:83"><span class="id" title="variable">u</span></a> <span class="id" title="notation">≈</span> <span class="id" title="abbreviation">Ret</span> <a class="idref" href="Utils.html#x:84"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span>; <span class="id" title="var">revert</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">einit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ecofix</span> <span class="id" title="var">CIH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> × <span class="id" title="var">sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">itree_eta</span> <span class="id" title="var">t</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">sub</span> &#x22A2; ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">desobs</span> <span class="id" title="var">t</span> <span class="id" title="var">EQu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">estep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="var">IHsub</span>, <span class="id" title="lemma">tau_eutt</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">estep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ebase</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">CIHL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#tau_subtree"><span class="id" title="lemma">tau_subtree</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pure_div_or_ret" class="idref" href="#pure_div_or_ret"><span class="id" title="lemma">pure_div_or_ret</span></a> : <span class="id" title="keyword">∀</span> {<a id="X:85" class="idref" href="#X:85"><span class="id" title="binder">X</span></a>} (<a id="t:86" class="idref" href="#t:86"><span class="id" title="binder">t</span></a> : <span class="id" title="record">itree</span> <span class="id" title="inductive">void1</span> <a class="idref" href="Utils.html#X:85"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#t:86"><span class="id" title="variable">t</span></a> <span class="id" title="notation">⤳</span> <span class="id" title="keyword">fun</span> <a id="x:87" class="idref" href="#x:87"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="Utils.html#t:86"><span class="id" title="variable">t</span></a> <span class="id" title="notation">≈</span> <span class="id" title="abbreviation">Ret</span> <a class="idref" href="Utils.html#x:87"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#pure_div_or_ret_aux"><span class="id" title="lemma">pure_div_or_ret_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="twice_twice_almost_pure" class="idref" href="#twice_twice_almost_pure"><span class="id" title="lemma">twice_twice_almost_pure</span></a> : <span class="id" title="keyword">∀</span> {<a id="X:88" class="idref" href="#X:88"><span class="id" title="binder">X</span></a>} (<a id="t:89" class="idref" href="#t:89"><span class="id" title="binder">t</span></a> : <span class="id" title="record">itree</span> <span class="id" title="inductive">void1</span> <a class="idref" href="Utils.html#X:88"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Utils.html#t:89"><span class="id" title="variable">t</span></a> <span class="id" title="notation">;;</span> <a class="idref" href="Utils.html#t:89"><span class="id" title="variable">t</span></a> <span class="id" title="notation">≈</span> <a class="idref" href="Utils.html#t:89"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">bind_ret_r</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">eutt_post_bind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#pure_div_or_ret"><span class="id" title="lemma">pure_div_or_ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Utils.html#pure_div_or_ret"><span class="id" title="lemma">pure_div_or_ret</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?? &lt;- <span class="id" title="var">H</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">End</span> <a class="idref" href="Utils.html#Tangent"><span class="id" title="section">Tangent</span></a>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;2024-06-07&nbsp;10:32&nbsp;*)</span><br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>